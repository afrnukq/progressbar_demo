<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <style type="text/css">
        #cntr {
            border: 1px solid;
            background-color: white;
            width: 500px;
            height: 20px;
            margin-bottom: 10px;
        }
        
        #prog {
            width: 0%;
            height: 20px;
            background-color: yellow;
        }
        
        #percent {
            float: right;
            margin-right: 2px;
        }
    </style>
    <script type="text/javascript" src="fakeprogress.js"></script>
    <script type="text/javascript">
        var onload = function() {

            FP.init({
                onPercentChanged: function(percent) {
                    var p = (percent < 100 ? percent.toFixed(1) : "100") + "%";
                    document.getElementById("percent").innerText = p;
                    document.getElementById("prog").style.width = p;
                },
                speed: 0.05
            });

            //FP.start();

            // var percent = 10;
            // var timer;
            // var speed = 0.05;

            // var updateProgress = function(s) {
            //     percent += s;

            //     if (percent.toFixed(2) < 100) {
            //         var p = percent.toFixed(1) + "%";

            //         document.getElementById("percent").innerText = p;
            //         document.getElementById("prog").style.width = p;
            //     } else {
            //         var p = "100%";
            //         document.getElementById("percent").innerText = p;
            //         document.getElementById("prog").style.width = p;
            //         clearInterval(timer);
            //     }
            // };

            // timer = setInterval(function() {
            //     updateProgress(speed);
            // }, 1);

            // document.getElementById("accelerate").onclick = function() {
            //     clearInterval(timer);
            //     speed = 0.1;
            //     timer = setInterval(function() {
            //         updateProgress(speed);
            //     }, 1);
            // };

            // document.getElementById("decelerate").onclick = function() {
            //     clearInterval(timer);
            //     speed = 0.05;
            //     timer = setInterval(function() {
            //         updateProgress(speed);
            //     }, 1);
            // };
        };
    </script>
</head>

<body onload="onload">
    <div id="cntr">
        <div id="prog"><span id="percent"></span></div>
    </div>
    <input type="button" id="accelerate" value="加速" />
    <input type="button" id="decelerate" value="减速" />
</body>

</html>